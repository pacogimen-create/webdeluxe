---
interface Props {
  title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title} - Admin Panel</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="/src/styles/global.css" />
  </head>
  <body>
    <div class="admin-layout">
      <!-- Sidebar -->
      <aside class="admin-sidebar">
        <div class="admin-sidebar-header">
          <div class="admin-logo">
            <svg width="32" height="32" viewBox="0 0 40 40" fill="none">
              <path d="M20 5C11.716 5 5 11.716 5 20C5 28.284 11.716 35 20 35C28.284 35 35 28.284 35 20C35 11.716 28.284 5 20 5Z" fill="url(#adminGradient)" />
              <path d="M15 18C15 18 17 16 20 16C23 16 25 18 25 18M15 24C15 24 17 22 20 22C23 22 25 24 25 24" stroke="white" stroke-width="2" stroke-linecap="round"/>
              <defs>
                <linearGradient id="adminGradient" x1="5" y1="5" x2="35" y2="35">
                  <stop offset="0%" stop-color="#0066cc" />
                  <stop offset="100%" stop-color="#00b4d8" />
                </linearGradient>
              </defs>
            </svg>
            <span>Admin Panel</span>
          </div>
        </div>

        <nav class="admin-nav">
          <a href="/admin/dashboard" class="admin-nav-item">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <path d="M2 10L10 2L18 10M4 8V18H16V8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>Dashboard</span>
          </a>
          
          <a href="/admin/news" class="admin-nav-item">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <path d="M3 3H17V17H3V3Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M7 7H13M7 11H13M7 15H10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
            <span>Noticias</span>
          </a>

          <a href="/admin/gallery" class="admin-nav-item">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <rect x="3" y="3" width="14" height="14" rx="2" stroke="currentColor" stroke-width="2"/>
              <circle cx="7.5" cy="7.5" r="1.5" fill="currentColor"/>
              <path d="M17 13L13 9L7 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>Galería</span>
          </a>

          <a href="/admin/coaches" class="admin-nav-item">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <path d="M10 10C12.2091 10 14 8.20914 14 6C14 3.79086 12.2091 2 10 2C7.79086 2 6 3.79086 6 6C6 8.20914 7.79086 10 10 10Z" stroke="currentColor" stroke-width="2"/>
              <path d="M2 18C2 14.6863 4.68629 12 8 12H12C15.3137 12 18 14.6863 18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
            <span>Entrenadores</span>
          </a>

          <a href="/admin/schedules" class="admin-nav-item">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <rect x="3" y="4" width="14" height="14" rx="2" stroke="currentColor" stroke-width="2"/>
              <path d="M7 2V6M13 2V6M3 8H17" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
            <span>Horarios</span>
          </a>

          <a href="/admin/messages" class="admin-nav-item">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <path d="M18 5L10 10L2 5M2 5V15C2 15.5304 2.21071 16.0391 2.58579 16.4142C2.96086 16.7893 3.46957 17 4 17H16C16.5304 17 17.0391 16.7893 17.4142 16.4142C17.7893 16.0391 18 15.5304 18 15V5C18 4.46957 17.7893 3.96086 17.4142 3.58579C17.0391 3.21071 16.5304 3 16 3H4C3.46957 3 2.96086 3.21071 2.58579 3.58579C2.21071 3.96086 2 4.46957 2 5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>Mensajes</span>
          </a>
        </nav>

        <div class="admin-sidebar-footer">
          <a href="/" class="admin-nav-item" target="_blank">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <path d="M10 2L2 7V17H7V12H13V17H18V7L10 2Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
            </svg>
            <span>Ver Sitio</span>
          </a>
          
          <button class="admin-nav-item" id="logout-btn">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <path d="M13 14L17 10M17 10L13 6M17 10H7M7 2H5C3.89543 2 3 2.89543 3 4V16C3 17.1046 3.89543 18 5 18H7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>Cerrar Sesión</span>
          </button>
        </div>
      </aside>

      <!-- Main Content -->
      <main class="admin-main">
        <slot />
      </main>
    </div>

    <script>
      import { supabase } from '../lib/supabase';

      // Logout functionality
      const logoutBtn = document.getElementById('logout-btn');
      logoutBtn?.addEventListener('click', async () => {
        await supabase.auth.signOut();
        window.location.href = '/admin/login';
      });

      // Highlight active nav item
      const currentPath = window.location.pathname;
      document.querySelectorAll('.admin-nav-item').forEach(link => {
        if (link.getAttribute('href') === currentPath) {
          link.classList.add('active');
        }
      });
    </script>
  </body>
</html>

<style>
  body {
    margin: 0;
    background: var(--color-off-white);
  }

  .admin-layout {
    display: flex;
    min-height: 100vh;
  }

  .admin-sidebar {
    width: 260px;
    background: var(--color-dark);
    color: var(--color-white);
    display: flex;
    flex-direction: column;
    position: fixed;
    height: 100vh;
    overflow-y: auto;
  }

  .admin-sidebar-header {
    padding: var(--space-lg);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  }

  .admin-logo {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    font-weight: 700;
    font-size: var(--text-lg);
  }

  .admin-nav {
    flex: 1;
    padding: var(--space-md);
    display: flex;
    flex-direction: column;
    gap: var(--space-xs);
  }

  .admin-nav-item {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    padding: var(--space-sm) var(--space-md);
    color: rgba(255, 255, 255, 0.7);
    text-decoration: none;
    border-radius: var(--radius-md);
    transition: all var(--transition-base);
    cursor: pointer;
    border: none;
    background: none;
    font-family: var(--font-primary);
    font-size: var(--text-base);
    width: 100%;
    text-align: left;
  }

  .admin-nav-item:hover,
  .admin-nav-item.active {
    background: rgba(255, 255, 255, 0.1);
    color: var(--color-white);
  }

  .admin-sidebar-footer {
    padding: var(--space-md);
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    display: flex;
    flex-direction: column;
    gap: var(--space-xs);
  }

  .admin-main {
    flex: 1;
    margin-left: 260px;
    padding: var(--space-2xl);
  }

  @media (max-width: 768px) {
    .admin-sidebar {
      transform: translateX(-100%);
      transition: transform var(--transition-base);
    }

    .admin-sidebar.open {
      transform: translateX(0);
    }

    .admin-main {
      margin-left: 0;
    }
  }
</style>
